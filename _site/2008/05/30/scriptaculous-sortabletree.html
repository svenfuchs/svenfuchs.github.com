<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="geo.region" content="DE-BE" />
    <meta name="geo.placename" content="Berlin" />
    <meta name="geo.position" content="52.51168;13.458236" />
    <meta name="ICBM" content="52.51168, 13.458236" />
    <link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/svenfuchs" />
    <link rel="openid.server" href="http://www.myopenid.com/server" />
    <link rel="openid.delegate" href="http://svenfuchs.myopenid.com/" />
    <link href="http://svenfuchs.com" rel="home" />
    <title>Scriptaculous SortableTree </title>
    <link rel="stylesheet" href="/stylesheets/styles.css">
    <link rel="stylesheet" href="/stylesheets/highlight.css">
    <script src="/javascripts/highlight.js"></script>
  </head>
  <body>
    <div id="page">
  <div id="content">
    <p><a href="/">&larr; Home</a></p>

    <div id="post">
      <h1>Scriptaculous SortableTree </h1>
      <script src="http://files.artweb-design.de/javascript/scriptaculous-sortabletree/vendor/prototype.js" type="text/javascript"></script>
<script src="http://files.artweb-design.de/javascript/scriptaculous-sortabletree/vendor/effects.js" type="text/javascript"></script>
<script src="http://files.artweb-design.de/javascript/scriptaculous-sortabletree/vendor/dragdrop.js" type="text/javascript"></script>
<script src="http://files.artweb-design.de/javascript/scriptaculous-sortabletree/sortable_tree.js" type="text/javascript"></script>

<style>
  #tree, #tree ul {
   	font: normal 12px Helvetica,Arial,Verdana,sans-serif;
  	line-height: 28px;
  	color: #444;
  	padding-left: 20px !important;
  	margin: 0px;
  	list-style-type: none !important;
  	cursor: move;
  }
  #tree {
  	padding: 10px 10px 2px 3px !important;
  	border: 1px solid #aaa;
  }
  #tree li {
  	margin-top: -6px;
  }
  #tree li a {
    border-width: 0px !important;
    padding: 2px 0 0 18px;
  	background: url(http://files.artweb-design.de/javascript/scriptaculous-sortabletree/demo/folder.png) no-repeat left top;
  }
  #tree li.file {
  	padding-left: 18px;
  }
  #tree li.file a {
  	padding-left: 18px;
  	background: url(http://files.artweb-design.de/javascript/scriptaculous-sortabletree/demo/file.png) no-repeat left top;
  }
  #tree li span.handle {
    display: block;
    float: left;
  	width: 15px;
  	height: 12px;
  	margin: 6px 3px 0 0;
  	cursor: pointer;
  }
  #tree li span {
  	background: url(http://files.artweb-design.de/javascript/scriptaculous-sortabletree/demo/folder_open.png) no-repeat 3px 3px;
  }
  #tree li.closed span {
  	background: url(http://files.artweb-design.de/javascript/scriptaculous-sortabletree/demo/folder_closed.png) no-repeat 3px 3px;
  }
  #tree li.closed li {
  	display: none;
  }
  #tree .drop_hover {
  	background: url(http://files.artweb-design.de/javascript/scriptaculous-sortabletree/demo/drag.png) no-repeat bottom left;
  }
  #tree .drop_top {
  	background-position: 12px top;
  }
  #tree .drop_bottom {
  	background-position: 12px bottom;
  }
  #tree .drop_insert {
  	background-position: 32px 100%;
  }
  #log {
   	font: normal 10px monospace;
    padding: 12px;
    margin-bottom: 1em;
    color: #999;
    line-height: 12px;
    border: 1px solid #aaa;
  }
  #log p {
    margin: 0px;
  }
</style>
<ul id="tree">
  <li id="node_1">
    <span class="handle"></span>
    <a>node 1</a>
    <ul>
      <li id="node_11">
        <span class="handle"></span>
        <a>node 11</a>
        <ul>
          <li id="node_111" class="file"><a>node 111</a></li>
          <li id="node_112" class="file"><a>node 112</a></li>
          <li id="node_113" class="file"><a>node 113</a></li>
        </ul>
      </li>
      <li id="node_12" class="file"><a>node 12</a></li>
      <li id="node_13" class="file"><a>node 13</a></li>
    </ul>
  </li>
  <li id="node_2">
    <span class="handle"></span>
    <a>node 2</a>
    <ul>
      <li id="node_21" class="file"><a>node 21</a></li>
      <li id="node_22" class="file"><a>node 22</a></li>
      <li id="node_23" class="file"><a>node 23</a></li>
    </ul>
  </li>
</ul>

<div id="log" style="display:none;"></div>

<script>
  var tree = new SortableTree('tree', {
    droppable: {
      container: ':not(.file)'
    },
    onDrop: function(drag, drop, event){
      $('log').update($('log').innerHTML + "<p>" + drag.to_params() + "</p>")
      $('log').show();
    }
  });
  tree.setSortable();

  function toggle_folder(event) {
    var element = event.element().ancestors().first();
    if(element.hasClassName('closed')) {
      element.removeClassName('closed');
    } else {
      element.addClassName('closed');
    }
  }

  Event.observe(window, "load", function(){
    $$('.handle').each(function(element){
      Event.observe(element, 'click', toggle_folder);
    });
  });
</script>

<p>I've published this on GitHub: <a href="http://github.com/svenfuchs/scriptaculous-sortabletree" title="svenfuchs's scriptaculous-sortabletree at master &mdash; GitHub">scriptaculous-sortabletree</a> and there are two working demos online:</p>

<ul>
<li><a href="http://files.artweb-design.de/javascript/scriptaculous-sortabletree/demo/bold.html" title="">Simple and bold</a></li>
<li><a href="http://files.artweb-design.de/javascript/scriptaculous-sortabletree/demo/textmate.html" title="">Textmate drawer</a> (same as above)</li>
</ul>

<p>See <a href="http://github.com/svenfuchs/scriptaculous-sortabletree/tree/master/demo/bold.html">demo/bold.html</a> and <a href="http://github.com/svenfuchs/scriptaculous-sortabletree/tree/master/demo/textmate.html">demo/textmate.html</a> for usage.
If you're familiar with Scriptaculous Draggables things should be pretty
obvious :)</p>

<p>I haven't included any fancy stuff (like configuring tree serialization to
different query formats) because in Javascript one can always overwrite the
default functions that are provided by the library with custom behaviour.</p>

<p>If you think something's seriously missing though, please <a href="http://www.artweb-design.de/svenfuchs">drop me a note</a>!</p>



    </div>

    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'svenfuchs';
        var disqus_title = '<%= page.title %>';
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

  </div>
</div>

    <a href="http://svenfuchs.com" rel="me" ></a>
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-24665870-1']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>
